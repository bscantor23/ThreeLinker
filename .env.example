# .env.example - Plantilla de configuración ThreeLinker
# Copia este archivo a .env y ajusta los valores según tu entorno

# ===== CONFIGURACIÓN GENERAL =====
NODE_ENV=production
DEBUG=collaboration:*

# ===== CONFIGURACIÓN DE SERVIDORES =====
# URLs de los servidores para failover (separados por coma)
VITE_SERVER_URLS=http://localhost:3001,http://localhost:3002

# URL principal (para compatibilidad hacia atrás)
VITE_SERVER_URL=http://localhost

# ===== CONFIGURACIÓN DE REDIS =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# TTL configurations (en segundos)
REDIS_TTL_ROOM=86400       # 24 horas para salas
REDIS_TTL_USER=3600        # 1 hora para usuarios  
REDIS_TTL_EDITOR=7200      # 2 horas para editor data
REDIS_TTL_SESSION=300      # 5 minutos para sesiones de failover

# ===== CONFIGURACIÓN DE INSTANCIAS =====
# Instancia 1
SERVER_1_PORT=3001
SERVER_1_INSTANCE_ID=server-1

# Instancia 2  
SERVER_2_PORT=3002
SERVER_2_INSTANCE_ID=server-2

# ===== CONFIGURACIÓN DE NGINX =====
NGINX_PORT=80
NGINX_STATIC_DIR=/var/www/threelinker
NGINX_CACHE_DIR=/tmp/nginx_cache

# ===== CONFIGURACIÓN DE TIMEOUTS =====
SOCKET_TIMEOUT=60000
PING_TIMEOUT=30000
PING_INTERVAL=15000
CONNECTION_TIMEOUT=8000

# Intervalos de limpieza
CLEANUP_INTERVAL=300000        # 5 minutos
HEALTH_CHECK_INTERVAL=30000    # 30 segundos
BROADCAST_INTERVAL=30000       # 30 segundos

# ===== CONFIGURACIÓN DE MONITORING =====
ENABLE_REDIS_INSIGHT=false
REDIS_INSIGHT_PORT=8001

# ===== CONFIGURACIÓN DE LOGS =====
LOG_LEVEL=info
LOG_MAX_FILES=3
LOG_MAX_SIZE=10m

# ===== CONFIGURACIÓN DE PERFORMANCE =====
# Límites de conexiones
MAX_CONNECTIONS_PER_IP=50
MAX_ROOMS_PER_USER=5
MAX_USERS_PER_ROOM=20

# Límites de archivos
MAX_FILE_SIZE=10485760        # 10MB
MAX_EDITOR_STATE_SIZE=5242880 # 5MB

# ===== CONFIGURACIÓN DE SEGURIDAD =====
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW=900000      # 15 minutos
RATE_LIMIT_MAX_REQUESTS=100

# CORS origins (separados por coma)
CORS_ORIGINS=http://localhost,http://localhost:80,http://localhost:5173

# ===== CONFIGURACIÓN ESPECÍFICA DE PRODUCCIÓN =====
# Descomenta y ajusta estos valores para producción en AWS:

# AWS_REGION=us-east-1
# DOMAIN=tu-dominio.com
# SSL_ENABLED=true
# HTTPS_PORT=443

# Para desarrollo local, usa:
# NODE_ENV=development
# VITE_SERVER_URL=http://localhost:3001
# DEBUG=collaboration:*,redis:*